---
external: false
title: 常用类
date: 2023-04-08
---

# 一、包装类

## 1. 包装类的分类
> 1. 针对八种基本数据类型相应的引用类型—包装类  
> 2. 有了类的特点，就可以调用类中的方法。   

![包装类](/assets/常用类/包装类.png)

![类体系图01](/assets/常用类/类体系图01.png)

![类体系图02](/assets/常用类/类体系图02.png)

![类体系图03](/assets/常用类/类体系图03.png)

## 2. 包装类和基本数据的转换

- 演示包装类和基本数据类型的相互转换,这里以int和 Integer演示。 

> 1. jdk5前的手动装箱和拆箱方式，装箱：基本类型->包装类型。反之拆箱。  
> 2. jdk5以后(含jdk5)的自动装箱和拆箱方式。  
> 3. 自动装箱底层调用的是valueOf方法，比如Integer.valueOf,其它包装类的用法类似,不一一举例   
```java
package com.hspedu.wrapper;

public class Integer01 {
    public static void main(String[] args) {
        //演示int <--> Integer 的装箱和拆箱
        //jdk5前是手动装箱和拆箱
        //手动装箱 int->Integer
        int n1 = 100;
        Integer integer = new Integer(n1);
        Integer integer1 = Integer.valueOf(n1);

        //手动拆箱
        //Integer -> int
        int i = integer.intValue();

        //jdk5后，就可以自动装箱和自动拆箱
        int n2 = 200;
        //自动装箱 int->Integer
        Integer integer2 = n2; //底层使用的是 Integer.valueOf(n2)
        //自动拆箱 Integer->int
        int n3 = integer2; //底层仍然使用的是 intValue()方法
    }
}
```

## 3. 包装类型和String 类型的相互转换
```java
package com.hspedu.wrapper;

public class WrapperVSString {
    public static void main(String[] args) {
        //包装类(Integer)->String
        Integer i = 100;//自动装箱
        //方式1
        String str1 = i + "";
        //方式2
        String str2 = i.toString();
        //方式3
        String str3 = String.valueOf(i);

        //String -> 包装类(Integer)
        String str4 = "12345";
        Integer i2 = Integer.parseInt(str4);//使用到自动装箱
        Integer i3 = new Integer(str4);//构造器

        System.out.println("ok~~");

    }
}
```

## 4. Integer 类和Character 类的常用方法

- 可以通过图查询到其含有的字段和方法，jump to source 可以查看到源码。

![常用方法](/assets/常用类/常用方法.png)

```java
package com.hspedu.wrapper;

public class WrapperMethod {
    public static void main(String[] args) {
        System.out.println(Integer.MIN_VALUE); //返回最小值
        System.out.println(Integer.MAX_VALUE);//返回最大值

        System.out.println(Character.isDigit('a'));//判断是不是数字
        System.out.println(Character.isLetter('a'));//判断是不是字母
        System.out.println(Character.isUpperCase('a'));//判断是不是大写
        System.out.println(Character.isLowerCase('a'));//判断是不是小写

        System.out.println(Character.isWhitespace('a'));//判断是不是空格
        System.out.println(Character.toUpperCase('a'));//转成大写
        System.out.println(Character.toLowerCase('A'));//转成小写

    }
}
```

## 5. Integer 类面试题

- 看看下面代码，输出什么结果? 为什么?

```java
package com.hspedu.wrapper;

public class WrapperExercise02 {
    public static void main(String[] args) {
        Integer i = new Integer(1);
        Integer j = new Integer(1);
        System.out.println(i == j);  //False
        //所以，这里主要是看范围 -128 ~ 127 就是直接返回
        /*
        //1. 如果i 在 IntegerCache.low(-128)~IntegerCache.high(127),就直接从缓存数组返回
        //2. 如果不在 -128~127,就直接 new Integer(i)
         public static Integer valueOf(int i) {
            if (i >= IntegerCache.low && i <= IntegerCache.high)
                return IntegerCache.cache[i + (-IntegerCache.low)];
            return new Integer(i);
        }
         */
        Integer m = 1; //底层 Integer.valueOf(1); -> 阅读源码
        Integer n = 1;//底层 Integer.valueOf(1);
        System.out.println(m == n); //T
        //所以，这里主要是看范围 -128 ~ 127 就是直接返回
        //，否则，就new Integer(xx);
        Integer x = 128;//底层Integer.valueOf(1);
        Integer y = 128;//底层Integer.valueOf(1);
        System.out.println(x == y);//False

        Integer i11=127;
        int i12=127;
        //只要有基本数据类型，判断的是
        //值是否相同
        System.out.println(i11==i12); //T

        Integer i13=128;
        int i14=128;
        System.out.println(i13==i14);//T
    }
}
```

# 二、String 类

## 1. String 类的理解和创建对象
> 1. String对象用于保存字符串,也就是一组字符序列   
> 2. 字符串常量对象是用双引号括起的字符序列。例如:"你好"、"12.97"、"boy"等    
> 3. 字符串的字符使用Unicode字符编码，一个字符(不区分字母还是汉字)占两个字节     
> 4. String类较常用构造器(其它看手册);      
> - String s1 =new String();   
> - String s2 = new String(String original);   
> - String s3 = new String(char[] a);   
> - String s4 = new String(char[] a, int startIndex, int count)   

![String结构](/assets/常用类/String结构.png)

> 1. 实现Serializable，说明可以串行化，即可以在网络上传输。    
> 2. 实现接口Comparable [String 对象可以比较大小]           

![String实现接口](/assets/常用类/String实现接口.png)

```java
package com.hspedu.string_;

import java.io.Serializable;

public class String01 {
    public static void main(String[] args) {
//         1.String 对象用于保存字符串，也就是一组字符序列
//         2. "jack" 字符串常量, 双引号括起的字符序列
//         3. 字符串的字符使用Unicode字符编码，一个字符(不区分字母还是汉字)占两个字节
//         4. String 类有很多构造器，构造器的重载
//           常用的有 String  s1 = new String(); //
//                      String  s2 = new String(String original);
//                      String  s3 = new String(char[] a);
//                      String  s4 =  new String(char[] a,int startIndex,int count)
//                      String  s5 = new String(byte[] b)
//        5. String 类实现了接口 Serializable【String 可以串行化:可以在网络传输】
//                         接口 Comparable [String 对象可以比较大小]
//        6. String 是 final 类，不能被其他的类继承
//        7. String 有属性 private final char value[]; 用于存放字符串内容, 说明其本质还是char数组。
//        8. 一定要注意：value 是一个final类型，不可以修改(地址不能修改)：即value不能指向新的地址，但是单个字符内容是可以变化

        String name = "jack";
        name = "tom";
        final char[] value = {'a','b','c'};
        char[] v2 = {'t','o','m'};
        value[0] = 'H';
        //value = v2; 不可以修改 value地址
        System.out.println(name); //Tom
    }
}
```

## 2. 创建String 对象的两种方式
> 1. 方式一: 直接赋值String s = "hspedu";  
> 2. 方式二: 调用构造器 String s = new String("hspedu");   

## 3. 两种创建String 对象的区别  

> 1.方式一:先从常量池查看是否有"hsp”数据空间,如果有，直接指向;如果 没有则重新创建,然后指向。s最终指向的是常量池的空间地址。   
> 2.方式二:先在堆中创建空间，里面维护了value属性，指向常量池的hsp空间。     
> - 如果常量池没有"hsp"，重新创建，如果有，直接通过value指向。最终指向的是堆中的空间地址。    
> 3.画出两种方式的内存分布图    

![String创建解析](/assets/常用类/String创建解析.png)

**测试题**

```java
package com.hspedu.string_;

public class StringExercise01 {
    public static void main(String[] args) {
        String a = "abc";
        String b ="abc";
        // equals在string中被重写，逐个比较，相同
        System.out.println(a.equals(b));//T
        System.out.println(a==b); //T
		// 这里指向的是同一个地址，故 == 也相同
    }
}
```
```java
package com.hspedu.string_;

public class StringExercise03 {
    public static void main(String[] args) {
        String a = "hsp"; //a 指向 常量池的 “hsp”
        String b =new String("hsp");//b 指向堆中对象
        System.out.println(a.equals(b)); //T
        System.out.println(a==b); //F
        //b.intern() 方法返回常量池地址
        System.out.println(a==b.intern()); //T intern方法查看API
        System.out.println(b==b.intern()); //F
        // b 指向的是堆地址，b.intern 返回的是常量池地址
    }
}
```
- 当调用intern方法时，如果池已经包含一个等于此 String对象的字符串(用equals(Object)方法确定)，则返回池中的字符串。否则，将此String 对象添加到池中，并返回此 String对象的引用                 
**b.intern方法最终返回的是常量池的地址(对象)**    





